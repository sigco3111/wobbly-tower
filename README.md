# 흔들흔들 탑 쌓기 (Wobbly Tower Stacking Game)

**다양한 모양의 블록을 중력을 거슬러 최대한 높이 쌓는 3D 물리 기반 게임입니다. 블록이 무너지지 않고 가장 높은 탑을 쌓아 최고 점수를 달성하세요!**

실행 주소 : https://dev-canvas-pi.vercel.app/

## 목차

1.  [특징](#특징)
2.  [기술 스택](#기술-스택)
3.  [프로젝트 구조](#프로젝트-구조)
4.  [시작하기 / 플레이 방법](#시작하기--플레이-방법)
5.  [게임플레이 및 조작법](#게임플레이-및-조작법)
6.  [블록 종류](#블록-종류)
7.  [게임 목표 및 팁](#게임-목표-및-팁)

## 특징

*   **몰입감 있는 3D 물리 시뮬레이션:** Cannon-es 엔진을 활용한 현실적인 물리 효과.
*   **다양한 블록 쌓기:** 정육면체, 직육면체, 원기둥 등 다양한 형태의 블록 제공.
*   **실시간 점수 추적:** 탑의 높이에 따라 실시간으로 점수 반영.
*   **최고 점수 기록:** Local Storage를 사용하여 최고 점수 저장 및 표시.
*   **다음 블록 미리보기:** 전략적인 플레이를 위한 다음 블록 안내.
*   **게임 오버 조건:** 블록이 바닥으로 떨어지거나 탑이 크게 기울어 무너질 경우 게임 종료.
*   **간편한 재시작:** '게임 다시 시작' 버튼으로 즉시 새 게임 시작 가능.
*   **반응형 UI:** 다양한 화면 크기에 최적화된 인터페이스.
*   **다양한 조작 방식 지원:**
    *   키보드: 블록 이동, 회전(일반/세밀), 놓기 지원.
    *   마우스: 카메라 회전, 줌, 중심점 이동(W,A,S,D) 지원.
    *   터치: 카메라 회전(한 손가락), 줌(두 손가락), 중심점 이동(두 손가락), 화면 버튼을 통한 블록 조작.
*   **시각적 보조 기능:**
    *   고스트 블록: 블록을 놓을 위치 미리보기.
    *   안정성 표시기: 블록 배치 안정도 (초록/노랑/빨강) 시각화.
    *   타워 불안정 경고: 탑이 불안정할 경우 화면 가장자리에 붉은색 비네트 효과로 경고.
*   **게임 내 도움말 패널:** 모든 조작법과 카메라 프리셋 버튼 제공.
*   **카메라 프리셋:** 정면, 탑 뷰, 측면 등 최적의 시야각 제공.

## 기술 스택

*   **프론트엔드:** React, TypeScript
*   **3D 렌더링:** Three.js
*   **물리 엔진:** Cannon-es
*   **스타일링:** Tailwind CSS
*   **모듈 관리:** `importmap`을 활용한 CDN 기반 ES Modules

## 프로젝트 구조

*   `index.html`: 메인 HTML 파일, `importmap`을 통해 CDN 종속성 관리.
*   `index.tsx`: React 애플리케이션 진입점.
*   `App.tsx`: 메인 애플리케이션 컴포넌트, 게임 상태 및 UI 레이아웃 관리.
*   `metadata.json`: 애플리케이션 메타데이터.
*   `src/components/`:
    *   `GameScene.tsx`: Three.js 장면, Cannon-es 물리, 게임 로직 및 사용자 상호작용을 처리하는 핵심 컴포넌트.
    *   `NextBlockPreview.tsx`: 다음에 나올 블록을 표시.
    *   `Controls.tsx`: (현재는 플레이스홀더) 추가적인 게임 컨트롤 UI를 위한 공간.
*   `src/constants.ts`: 블록 속성, 물리 매개변수, 카메라 설정 등 게임 관련 상수 정의.
*   `src/types.ts`: TypeScript 인터페이스 및 열거형 정의.

## 시작하기 / 플레이 방법

### 요구 사항

*   ES Modules 및 WebGL을 지원하는 최신 웹 브라우저.

### 게임 실행

*   게임은 웹 브라우저에서 직접 실행되도록 설계되었습니다.
*   호스팅된 경우 제공된 URL로 접속합니다.
*   로컬 테스트 시, 모든 파일 (`index.html`, `index.tsx` 등)이 로컬 웹 서버를 통해 제공되어야 합니다 (ES Module 보안 제약으로 인해 파일 시스템에서 `index.html`을 직접 여는 것은 작동하지 않을 수 있습니다).

### API 키 (해당하는 경우)

*   이 애플리케이션은 향후 API 키가 필요한 기능(예: GenAI 서비스 연동)으로 확장될 수 있습니다.
*   이러한 기능이 구현될 경우, API 키는 실행 환경에서 `API_KEY`라는 이름의 환경 변수(예: `process.env.API_KEY`)로 제공되어야 합니다.
*   애플리케이션은 사용자에게 API 키를 묻거나 입력 UI를 제공하지 않습니다.

## 게임플레이 및 조작법

### 블록 놓기

1.  이동 및 회전 컨트롤을 사용하여 "고스트 블록"(미리보기)의 위치를 조정합니다.
2.  고스트 블록 아래의 **안정성 표시기**는 배치 안전성을 나타냅니다 (초록 = 안전, 노랑 = 위험, 빨강 = 불안정).
3.  `Space` 또는 `Enter` 키를 누르거나 화면의 "블록 놓기!" 버튼을 클릭하여 블록을 놓습니다.

### 조작 상세

#### 키보드

*   **블록 이동:** `←` (왼쪽), `→` (오른쪽) 화살표 키
*   **블록 회전:** `R` 키
*   **블록 세밀 회전:** `Shift` + `R` 키
*   **블록 놓기:** `Space` 또는 `Enter` 키
*   **카메라 중심 이동:** `W` (앞), `A` (왼쪽), `S` (뒤), `D` (오른쪽) 키

#### 마우스

*   **카메라 회전:** 마우스 왼쪽 버튼 드래그
*   **카메라 줌:** 마우스 휠 스크롤

#### 터치 (모바일)

*   **카메라 회전:** 한 손가락 드래그
*   **카메라 줌:** 두 손가락으로 화면을 축소/확대 (Pinch)
*   **카메라 중심 이동:** 두 손가락 드래그
*   **블록 조작:** 화면 하단의 이동 및 회전 버튼 사용

#### 도움말 패널

*   게임 화면 우측 상단의 `?` 아이콘을 클릭하면 상세 조작법과 카메라 프리셋(정면, 탑 뷰, 측면) 버튼이 있는 도움말 패널이 나타납니다.

## 블록 종류

*   **작은 정육면체 (Small Cube):** 기본적이고 균형 잡힌 정육면체.
*   **길쭉한 직육면체 (Tall Rectangle):** 높고 좁은 형태로, 불안정할 수 있음.
*   **넓은 직육면체 (Wide Rectangle):** 넓고 납작하여 안정적인 기반을 제공.
*   **작은 원기둥 (Small Cylinder):** 둥근 형태로, 신중한 배치가 필요.

## 게임 목표 및 팁

*   **목표:** 블록을 최대한 높이 쌓아 올리세요.
*   점수는 미터(m) 단위로 측정됩니다.
*   블록을 놓기 전 **안정성 표시기**를 주의 깊게 확인하세요.
*   **다음 블록 미리보기**를 활용하여 전략적으로 계획하세요.
*   탑 전체의 균형을 유지하는 것이 중요합니다. 너무 한쪽으로 치우치면 무너지기 쉽습니다.
*   화면 가장자리에 **붉은색 비네트 효과**가 나타나면 탑이 불안정하다는 신호입니다.

---

이 게임을 즐겨주세요!
